<div class="linkmail-container linkmail">

    <div style="display:flex;">
        <img src="https://i.imgur.com/LtIDUzZ.png" style="width:50px; margin:20px auto;"/>
    </div>

    <!-- New Sign-in View -->
    <div id="linkmail-signin">
        <div>
            <div style="display:flex; flex-direction:column; gap:8px; margin:20px 0px;">
                <h2 class="linkmail-header">Personalized Emails with AI</h2>
                <p>Connect your Gmail to generate and send personalized emails straight from LinkedIn</p>
            </div>
            <button id="googleSignInButton" class="lm-btn">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Gmail_icon_%282020%29.svg/1280px-Gmail_icon_%282020%29.svg.png" alt="Google logo" style="height: 14px; margin-right: 8px; vertical-align: middle;">
                Connect Gmail Account
            </button>
            <br>
        </div>
    </div>

    <div id="linkmail-splash" style="display: none;">
        <h2 id="title" class="linkmail-header"></h2>
        <div id="lastEmailStatus" class="linkmail-last-email-status">No Email Sent Yet</div>
        <br>
        <div class="linkmail-template-select" style="margin-bottom: 20px; width: 100%;">
            <div id="template-dropdown" class="template-dropdown">
                <!-- <div class="template-dropdown-card">
                    <p class="template-dropdown-icon">ðŸ’¼</p>
                    <div>
                        <h2>Example Template</h2>
                        <p>Example template description this will be overwritten.</p>
                    </div>
                </div> -->
                <!-- Templates will be added here dynamically -->
            </div>
        </div>


        <button id="generateButton" class="lm-btn">
            Generate
            <svg xmlns="http://www.w3.org/2000/svg" style="margin-left:8px;" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-horizontal-icon lucide-send-horizontal"><path d="M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z"/><path d="M6 12h16"/></svg>
        </button>
    </div>

    <div id="linkmail-editor" style="display: none;">
        <div style="display:flex; flex-direction:column; gap:8px;">
            <div style="position: relative;">
                <input id="recipientEmailInput" class="lm-input" placeholder="Recipient Email" style="font-size:10pt;">
                <button id="findEmailButton" class="lm-btn-2" style="display: none; margin-top: 4px; font-size: 9pt; padding: 4px 8px;">
                    <svg xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    Find Email
                </button>
                <button id="findEmailApolloButton" class="lm-btn-2" style="display: none; margin-top: 4px; font-size: 9pt; padding: 4px 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <svg xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2L2 7v10c0 5.55 3.84 10 9 9s9-4.03 9-9V7l-8-5z"/>
                        <path d="M12 22s8-4 8-10V7l-8-5-8 5v5c0 6 8 10 8 10"/>
                    </svg>
                    Find Email with Apollo
                </button>
            </div>
            
            <input id="emailSubject" class="lm-input linkmail-subject" placeholder="Empty Subject" style="font-size:10pt;">
            <div style="position:relative;">
                <textarea id="emailResult" class="lm-textarea" id="auto-resize-textarea" style="font-size:10pt;"></textarea>
                
            </div>

            <div id="emailAttachments" class="email-attachments" style="display:none;">
                <div class="attachments-header">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.47"/></svg>
                    <span>Attachments</span>
                </div>
                <div id="attachmentsList" class="email-attachments-list">
                    <!-- Attachments will be listed here -->
                </div>
            </div>
            
            <div style="display:flex; gap:4px; justify-content: space-between; padding:0px 0px;">
                <button id="copyButton" class="lm-btn-2 linkmail-copy-button" style="margin:0px 0px;">
                    <svg xmlns="http://www.w3.org/2000/svg" style="margin-right:8px; color:gray;" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy-icon lucide-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                    Copy
                </button>
                <button id="sendGmailButton" class="lm-btn linkmail-send-button" style="margin:0px 0px;">Send Email</button>
            </div>

        </div>
        
    </div>

    <div id="linkmail-success" style="display:none;">
        <h2 class="linkmail-header">Email sent successfully!</h2>
        <br>
        
        <!-- Similar Person Suggestion Section -->
        <div id="similar-person-section" style="display:none; margin-bottom: 16px;">
            <div style="background: #f8f9fa; border-radius: 8px; padding: 12px; border: 1px solid #e1e5e9;">
                <h4 style="margin: 0 0 8px 0; font-size: 14px; color: #333; font-weight: 600;">
                    ðŸ’¡ Reach out to someone similar next
                </h4>
                <div id="similar-person-card" style="cursor: pointer; transition: all 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div id="similar-person-avatar" style="width: 40px; height: 40px; border-radius: 50%; background: #0066cc; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 16px; flex-shrink: 0;">
                        </div>
                        <div style="flex: 1; min-width: 0;">
                            <div id="similar-person-name" style="font-weight: 600; font-size: 14px; color: #333; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                            </div>
                            <div id="similar-person-title" style="font-size: 12px; color: #666; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                            </div>
                            <div id="similar-person-reason" style="font-size: 11px; color: #0066cc; font-weight: 500;">
                            </div>
                        </div>
                        <div style="color: #0066cc; font-size: 16px; flex-shrink: 0;">
                            â†’
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <a class="lm-btn" href="https://mail.google.com/mail/u/0/#sent" target="_blank" style="width:fit-content; color: white !important; text-decoration: none !important;">Check in Gmail</a>
    </div>

    <!-- People Suggestions View for Feed Page -->
    <div id="linkmail-people-suggestions" style="display:none;">
        <h2 class="linkmail-header">People you might want to reach out to</h2>
        <p style="font-size: 12px; color: #666; margin-bottom: 12px;">Filter by role and company from your contacts database:</p>

        <div id="facets-filters" style="display:flex; gap: 8px; margin-bottom: 12px;">
            <select id="jobTitleFilter" class="lm-input" style="flex:1; font-size:10pt; padding:6px 8px;">
                <option value="">All Job Titles</option>
            </select>
            <select id="companyFilter" class="lm-input" style="flex:1; font-size:10pt; padding:6px 8px;">
                <option value="">All Companies</option>
            </select>
        </div>

        <button id="peopleSearchButton" class="lm-btn-2" style="margin-bottom: 12px;">Search</button>

        <div id="people-search-results" style="display:flex; flex-direction:column; gap:8px; margin-bottom: 12px;"></div>
        
        <div id="suggested-people-container" style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 16px;">
            <!-- Suggested people will be populated here -->
        </div>
        
        <div id="people-suggestions-loading" style="display: none; text-align: center; padding: 20px;">
            <div style="margin-bottom: 8px;">
                <svg xmlns="http://www.w3.org/2000/svg" style="animation: spin 1s linear infinite;" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12a9 9 0 11-6.219-8.56"/>
                </svg>
            </div>
            <p style="font-size: 12px; color: #666;">Finding people for you...</p>
        </div>
        
        <div id="people-suggestions-error" style="display: none; text-align: center; padding: 20px;">
            <p style="font-size: 12px; color: #e74c3c; margin-bottom: 8px;">Unable to find suggestions at the moment</p>
            <button id="retry-people-search" class="lm-btn-2" style="font-size: 11px; padding: 6px 12px;">Try Again</button>
        </div>
    </div>

   <div class="account-dropdown linkmail-account-info">
        <div class="account-dropdown-con">
            <p id="user-email-display" class="account-email">example@gmail.com</p>
            <div class="dropdown-container">
                <button id="menuToggle" class="menu-toggle-btn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="black" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ellipsis-icon lucide-ellipsis"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button>
                <div id="menuContent" class="dropdown-menu">
                    <div href="#" id="editProfileButton" class="dropdown-item">Edit Profile</div>
                    <div href="#" id="signOutButton" class="dropdown-item">Sign Out</div>
                    <div href="#" id="settingsButton" class="dropdown-item">Settings</div>
                </div>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="styles/main.css">
<link rel="stylesheet" href="styles/anim.css">
<link rel="stylesheet" href="styles/linkedin-div.css">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>